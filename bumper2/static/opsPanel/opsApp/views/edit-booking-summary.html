<div class="row">
    <div class="col-lg-3">

        <div class="ibox">
            <div class="ibox-title">
                <h5>Initiate Call</h5>
                <a id="call-status" permission="['Caller']" ng-click="editBookingSummaryCtrl.xmpp_connect(true)" class="btn btn-xs btn-info pull-right">Connecting...</a>
            </div>
        </div>

        <div class="ibox" permission="['OpsAdmin','OpsManager','DriverManager','CustomerRelations','CityCallCenterManager','VASIncharge','WorkshopAssistantManager']">
            <div class="ibox-title">
                <h5>Quick Actions</h5>
            </div>
            <div class="ibox-content">
                <ul class="list-group" ng-if="!editBookingCtrl.booking.workshop" permission="['OpsAdmin','OpsManager','DriverManager','CustomerRelations']">
                    <li class="list-group-item">
                        <div class="row">
                            <button type="button"
                                    ng-click="editBookingCtrl.assignWorkshop()"
                                    class="btn btn-sm btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Assign Workshop</button>
                        </div>
                    </li>
                </ul>
                <ul class="list-group">
                    <li ng-if="editBookingCtrl.booking.status.flow_order_num >= 9" class="list-group-item" permission="['OpsAdmin']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="(editBookingCtrl.booking.status.flow_order_num>=24) || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.setCancellationReason(127)"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Cancel Booking</button></div>
                    </li>
                    <li ng-if="editBookingCtrl.booking.status.flow_order_num < 9" class="list-group-item" permission="['OpsAdmin','OpsManager','WorkshopManager','CityCallCenterManager']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="(editBookingCtrl.booking.status.flow_order_num>=24) || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.setCancellationReason(127)"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Cancel Booking</button></div>
                    </li>
                    <li class="list-group-item" permission="['OpsAdmin','OpsManager','CityCallCenterManager']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="(editBookingCtrl.booking.status.id !=24
                                    || (editBookingCtrl.booking.status.id==24 && editBookingCtrl.booking.ops_status.id==28)
                                    || (editBookingCtrl.booking.status.id==24 && editBookingSummaryCtrl.selectedCancellationReason.reason_owner==2) )
                                    || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.setLostReason(127)"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Lost</button></div>
                    </li>
                    <li class="list-group-item" permission="['OpsAdmin','OpsManager']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="(editBookingCtrl.booking.status.flow_order_num<22 || editBookingCtrl.booking.status.flow_order_num>=24) || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.markBookingClosed(23)"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Close Booking</button></div>
                    </li>
                    <li class="list-group-item"  permission="['CustomerRelations']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.requestFeedback()"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Request Feedback</button>
                        </div>
                    </li>
                    <li class="list-group-item"  permission="['CustomerRelations']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.sendEmail()"
                                    class="btn btn-primary btn-sm col-lg-10 col-lg-offset-1">
                                Send Email</button>
                        </div>
                    </li>
                    <li class="list-group-item"  permission="['OpsAdmin','OpsManager','VASIncharge','WorkshopAssistantManager','CityCallCenterManager']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="editBookingCtrl.booking.status.flow_order_num<24 || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.createReworkBooking()"
                                    title="Enabled after Car Reached Drop Location"
                                    class="btn btn-danger btn-sm col-lg-10 col-lg-offset-1">
                                Create Rework Booking</button>
                        </div>
                    </li>
                    <li class="list-group-item"  permission="['OpsAdmin','OpsManager']">
                        <div class="row">
                            <button type="button"
                                    ng-disabled="editBookingCtrl.booking.status.flow_order_num!=21 || editBookingCtrl.ajax_loading"
                                    ng-click="editBookingSummaryCtrl.markCarReturnedByCustomerBooking()"
                                    title="Enabled after Car Reached Drop Location"
                                    class="btn btn-danger btn-sm col-lg-10 col-lg-offset-1">
                                Car Returned By Customer</button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="ibox">
            <div class="ibox-title">
                <h5>Customer Voice</h5>
                <a permission="['OpsAdmin','OpsManager','Caller','CityCallCenterManager', 'WorkshopManager', 'WorkshopAssistantManager','DriverManager','VASIncharge','WorkshopWorkManager']" ng-click="editBookingSummaryCtrl.addFollowup()" class="btn btn-xs btn-primary pull-right">Add Cust Followup</a>
                <a
                        ng-click="editBookingSummaryCtrl.setOpsStatusToFollowup()"
                        ng-if="editBookingCtrl.booking.ops_status.id!=8 && (editBookingCtrl.booking.status.id==1 || editBookingCtrl.booking.status.id==3 || editBookingCtrl.booking.status.id==26)"
                        permission="['OpsAdmin','OpsManager','Caller','CityCallCenterManager', 'WorkshopManager','DriverManager']"
                        class="btn btn-xs btn-primary">Schedule Followup</a>
                <a
                        ng-click="editBookingSummaryCtrl.removeOpsStatusFromFollowup()"
                        ng-if="editBookingCtrl.booking.ops_status.id==8"
                        permission="['OpsAdmin','OpsManager','Caller','CityCallCenterManager', 'WorkshopManager']"
                        class="btn btn-xs btn-warning">Remove From Followup</a>
            </div>
            <div class="ibox-content" style="max-height: 450px;overflow-y: auto;">
                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="followup in editBookingSummaryCtrl.followups" >
                        <p>{$ followup.created_at | date:'d MMMM yy HH:mm' : 'IST' $} by
                            <small><strong>{$ followup.updated_by.name $}</strong></small>
                            <small ng-if="followup.follow_for==1"><strong ng-if="followup.comm_mode"><label class="badge badge-info">{$ followup.comm_mode $}</label></strong>
                                <strong ng-if="followup.result_details.name">,<label class="badge badge-info">{$ followup.result_details.name $}</label></strong></small>
                            <small ng-if="followup.follow_for==2">
                                <strong><label class="badge badge-warning-light">Workshop Note</label></strong>
                            </small>
                        </p>
                        <p>{$ followup.note $}</p>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-lg-9">
        <form method="get" class="form-horizontal" name="editSummaryForm">
            <div ng-show="editBookingSummaryCtrl.errorMsg" ng-bind-html="editBookingSummaryCtrl.errorMsg" class="alert alert-danger"></div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Lead Quality</label>
                <div class="col-sm-9">
                    <select ng-model="editBookingSummaryCtrl.editedBooking.lead_quality" class="form-control  input-sm" title="Lead Quality">
                        <option value="1">Hot</option>
                        <option value="4">Red Hot</option>
                        <option value="2">Warm</option>
                        <option value="3">Cold</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Assigned To</label>
                <div class="col-sm-9">
                    <select
                            ng-model="editBookingSummaryCtrl.editedBooking.assigned_to"
                            class="form-control  input-sm"
                            title="Assigned To">
                        <option ng-repeat="option in editBookingSummaryCtrl.opsAgents" value="{$ option.id $}">{$ option.name $}</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Caller</label>
                <div class="col-sm-9">
                    <select
                            ng-model="editBookingSummaryCtrl.editedBooking.caller"
                            class="form-control  input-sm"
                            required
                            title="Caller">
                        <option ng-repeat="option in editBookingSummaryCtrl.opsAgents" value="{$ option.id $}">{$ option.name $}</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label">Next Followup Dt</label>
                <div class="col-sm-9">
                    <p ng-show="editBookingSummaryCtrl.editedBooking.next_followup">{$ editBookingSummaryCtrl.editedBooking.next_followup | date:'d MMMM yy HH:mm' : 'IST' $}
                        <button
                                ng-show="!editBookingSummaryCtrl.showNextFollowupDtEditBtn"
                                ng-click="editBookingSummaryCtrl.showNextFollowupDtEditBtn = true"
                                class="btn btn-link btn-primary btn-xs" >Edit</button>
                    </p>
                    <div ng-show="editBookingSummaryCtrl.showNextFollowupDtEditBtn || !editBookingSummaryCtrl.editedBooking.next_followup" class="input-group">
                        <input name="next_followup" data-ng-model="editBookingSummaryCtrl.editedBooking.next_followup" type="text" title="Next followup on" readonly="readonly" class=" input-sm form_datetime form-control">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label">User Comments</label>
                <div class="col-sm-9">
                    <textarea ng-model="editBookingSummaryCtrl.booking.desc"  class="form-control" cols="20" rows="2" id="id_desc" maxlength="2048" name="desc" placeholder="User comments" readonly="readonly"></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label">Source</label>
                <div class="col-sm-9">
                    <select ng-model="editBookingSummaryCtrl.editedBooking.source"
                            class="form-control  input-sm" title="Booking Sources">
                        <option ng-repeat="option in editBookingSummaryCtrl.bookingSources" value="{$ option.source $}">{$ option.source_desc $}</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">City</label>
                <div class="col-sm-9">
                    <select ng-model="editBookingSummaryCtrl.editedBooking.city"
                            class="form-control input-sm"
                            required
                            title="City">
                        <option ng-repeat="option in editBookingSummaryCtrl.cities" value="{$ option.id $}">{$ option.name $}</option>
                    </select>
                </div>
            </div>
            <div class="form-group" >
                <label class="col-sm-3 control-label">Is Work Done At Doorstep?</label>
                <div class="col-sm-9">
                    <input class="form-control" type="checkbox" ng-model="editBookingSummaryCtrl.editedBooking.is_doorstep">
                </div>
            </div>

            <div class="form-group" ng-if="editBookingSummaryCtrl.booking.status.id == 24">
                <label class="col-sm-3 control-label">Cancelled by</label>
                <div class="col-sm-9">
                    <label class="label label-warning" ng-if="editBookingSummaryCtrl.selectedCancellationReason.reason_owner==2">Ops Team</label>
                    <label class="label label-warning" ng-if="!editBookingSummaryCtrl.selectedCancellationReason.reason_owner">Customer</label>
                </div>
            </div>
            <div class="form-group" ng-if="editBookingSummaryCtrl.booking.status.id == 24">
                <label class="col-sm-3 control-label">Cancellation Reason</label>
                <div class="col-sm-9">
                    <span>{$ editBookingSummaryCtrl.selectedCancellationReason.reason $}</span>
                </div>
            </div>
            <div class="form-group" ng-if="editBookingSummaryCtrl.booking.status.id == 24">
                <label class="col-sm-3 control-label">Cancellation Details</label>
                <div class="col-sm-9">
                    <span>{$ editBookingSummaryCtrl.booking.reason_for_cancellation_desc $}</span>
                </div>
            </div>
            <div class="form-group" ng-if="editBookingSummaryCtrl.booking.status.id == 24">
                <label class="col-sm-3 control-label">LOST Reason</label>
                <div class="col-sm-9">
                    <span>{$ editBookingSummaryCtrl.selectedFinalCancelReason.reason $}</span>
                </div>
            </div>
            <div class="form-group">
                <div class="text-center">
                    <button class="btn btn-white" type="button" ng-click="editBookingSummaryCtrl.cancelEditing()">Back</button>
                    <input permission="['OpsAdmin','OpsManager','Caller','CityCallCenterManager', 'WorkshopManager','WorkshopWorkManager', 'WorkshopAssistantManager','VASIncharge','DriverManager']"
                           class="btn btn-primary"
                           type="submit"
                           ng-click="editBookingSummaryCtrl.saveBooking(true)"
                           ng-disabled="editBookingSummaryCtrl.ajax_loading || editSummaryForm.$invalid"
                           ng-value="editBookingSummaryCtrl.ajax_loading?'Please Wait..':'Save and continue editing'"/>
                    <input permission="['OpsAdmin','OpsManager','Caller','CityCallCenterManager', 'WorkshopManager','WorkshopWorkManager', 'WorkshopAssistantManager', 'VASIncharge','DriverManager']"
                           class="btn btn-primary"
                           type="submit"
                           ng-click="editBookingSummaryCtrl.saveBooking(false)"
                           ng-disabled="editBookingSummaryCtrl.ajax_loading || editSummaryForm.$invalid "
                           ng-value="editBookingSummaryCtrl.ajax_loading?'Please Wait..':'Save'"/>
                </div>
            </div>

        </form>
        <div class="ibox"
             ng-if="editBookingSummaryCtrl.reworks.rework_panels.length>0 || editBookingSummaryCtrl.reworks.rework_packages.length>0">
            <div class="ibox-title">
                <h5 class="text-danger">Rework in the Booking</h5>
            </div>
            <div class="ibox-content">
                <div>
                    <table class="table table-hover issue-tracker table-responsive">
                        <tbody>
                        <tr ng-repeat="panel in editBookingSummaryCtrl.reworks.rework_panels">
                            <td>
                                <span class="badge badge-warning-light">{$ panel.type_of_work $}</span>
                            </td>
                            <td class="issue-info">
                                <div class="row">
                                    <a href="#">
                                        {$ panel.panel_details.panel_details.car_panel.name $}
                                    </a>
                                    <small>
                                        <label ng-if="panel.panel_details.panel_details.car_panel.internal" class="label label-danger">Internal</label>
                                    </small>
                                </div>
                            </td>
                            <td>
                                <span>{$ panel.reason $}</span>
                            </td>
                            <td class="text-right">
                                <div class="btn-group dropdown" uib-dropdown="">
                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false">
                                        Action <span class="caret"></span>
                                    </button>
                                    <ul role="menu" uib-dropdown-menu="" class="dropdown-menu">
                                        <li><a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']" class="btn-sm" ng-click="editBookingSummaryCtrl.removeReworkPanel(panel.id)"> Remove Rework Panel</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                        <tr ng-repeat="pack in editBookingSummaryCtrl.reworks.rework_packages">
                            <td>
                                <span class="badge badge-info" ng-show="pack.booking_package_details.package.package.category == 2">Denting</span>
                                <span class="badge badge-info" ng-show="pack.booking_package_details.package.package.category == 1">VAS</span>
                                <span class="badge badge-info" ng-show="pack.booking_package_details.package.package.category == 3">FB</span>
                            </td>
                            <td class="issue-info">
                                <div class="row">
                                    <a href="#">
                                        {$ pack.booking_package_details.package.package.name $}
                                    </a>
                                    <small>
                                        <label ng-if="pack.booking_package_details.package.package.internal" class="label label-danger">Internal</label>
                                    </small>
                                </div>
                            </td>
                            <td>
                                <span >{$ pack.reason $}</span>
                            </td>
                            <td class="text-right">
                                <div class="btn-group dropdown" uib-dropdown="">
                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false">
                                        Action <span class="caret"></span>
                                    </button>
                                    <ul role="menu" uib-dropdown-menu="" class="dropdown-menu">
                                        <li><a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']" class="btn-sm" ng-click="editBookingSummaryCtrl.removeReworkPackage(pack.id)"> Remove Rework Package</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="ibox">
            <div class="ibox-title">
                <h5>Packages in the Booking</h5>
                <!-- permission-status-check="{'current_flow_order_num': {$ editBookingCtrl.booking.status.flow_order_num $},'not_allowed_after': {4: 'roles':['Caller','CityCallCenterManager']}}"-->
                <div class="ibox-tools"
                     permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge','Caller','CityCallCenterManager','DriverManager']">
                    <button ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                            ng-click="editBookingSummaryCtrl.alertBookingChanged()"
                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge','CityCallCenterManager']"
                            class="btn btn-primary btn-xs">Alert Customer of Change</button>

                    <!-- buttons with permission to caller before pickup -->
                    <button ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                            ng-click="editBookingSummaryCtrl.addPackageToBooking(true)"
                            ng-if="editBookingCtrl.booking.rework_booking && editBookingCtrl.booking.status.flow_order_num < 4"
                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge','Caller','CityCallCenterManager','DriverManager']"
                            class="btn btn-primary btn-xs" > Add Extra Work</button>

                    <button ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                            ng-click="editBookingSummaryCtrl.addPackageToBooking()"
                            ng-if="editBookingCtrl.booking.status.flow_order_num < 4"
                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge','Caller','CityCallCenterManager','DriverManager']"
                            class="btn btn-primary btn-xs" >{$ editBookingCtrl.booking.rework_booking ? 'Add Rework Package': 'Add Package' $}</button>

                    <!-- buttons without permission to caller before pickup -->
                    <button ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                            ng-click="editBookingSummaryCtrl.addPackageToBooking(true)"
                            ng-if="editBookingCtrl.booking.rework_booking && editBookingCtrl.booking.status.flow_order_num >= 4"
                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']"
                            class="btn btn-primary btn-xs" > Add Extra Work</button>

                    <button ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                            ng-click="editBookingSummaryCtrl.addPackageToBooking()"
                            ng-if="editBookingCtrl.booking.status.flow_order_num >= 4"
                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']"
                            class="btn btn-primary btn-xs" >{$ editBookingCtrl.booking.rework_booking ? 'Add Rework Package': 'Add Package' $}</button>
                </div>
            </div>
            <div class="ibox-content">
                <div class="" >
                    <table class="table table-hover issue-tracker table-responsive">
                        <tbody>
                        <tr ng-repeat="pack in editBookingSummaryCtrl.booking.booking_package">
                            <td>
                                <span class="badge badge-info" ng-show="pack.package.package.category == 2">Denting</span>
                                <span class="badge badge-info" ng-show="pack.package.package.category == 1">VAS</span>
                                <span class="badge badge-info" ng-show="pack.package.package.category == 3">FB</span>
                                <br ng-if="pack.extra" />
                                <span class="badge badge-warning" ng-if="pack.extra">Extra</span>
                            </td>
                            <td class="issue-info" colspan="{$ pack.package.package.category == 2 ? 3:1 $}">
                                <div class="row">
                                    <a href="#">
                                        {$ pack.package.package.name $}
                                    </a>
                                    <small>
                                        <!--{$ pack.package.package.desc $}-->
                                        <label ng-if="pack.package.package.internal" class="label label-danger">Internal</label>
                                    </small>
                                </div>
                                <div ng-if="pack.package.package.category == 2" class="row">
                                    <div class="project-list">
                                        <table class="table table-hover table-responsive">
                                            <tbody>
                                            <tr ng-repeat="item in pack.booking_package_panel" >
                                                <td class="project-status">
                                                    <span class="label label-info">
                                                        {$ item.panel_details.type_of_work $}
                                                        <a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','CityCallCenterManager']" ng-click="editBookingSummaryCtrl.updateTypeOfWork(item.id, editBookingSummaryCtrl.booking.usercar,item.panel_details.id)">
                                                            <i class="fa fa-pencil"></i>
                                                        </a>
                                                    </span>
                                                    <span class="label label-danger" ng-if="item.panel_details.car_panel.internal">Internal</span>
                                                    <span class="label label-warning" ng-if="item.extra">Extra</span>
                                                </td>
                                                <td class="project-title">
                                                    <a>{$ item.panel_details.car_panel.name $}</a>
                                                    <br/>
                                                    <small></small>
                                                </td>
                                                <td>
                                                    <span ng-if="!item.panel_details.editable">
                                                        &#8377; {$ item.price $}
                                                    </span>
                                                    <span ng-if="item.panel_details.editable && !item.showEditForm">
                                                        <span ng-if="item.part_price == '0.00' || item.part_price == 0">[ Part: {$ item.part_price $}, Material: {$ item.material_price $}, Labour: {$ item.labour_price $}]</span>
                                                        <span ng-if="item.part_price != '0.00' && item.part_price != 0">&#8377;{$ item.price $}</span>
                                                        <a  ng-click="item.showEditForm=1;item.newPriceForPanel=null"
                                                            class="btn btn-outline btn-link btn-success btn-xs"
                                                            permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager', 'CityCallCenterManager']">Edit</a>
                                                        <a  ng-click="editBookingSummaryCtrl.showQuotes(item.id, item.panel_details.car_panel.name)"
                                                            class="btn btn-outline btn-link btn-success btn-xs">Quotes</a>
                                                    </span>
                                                    <div ng-if="item.showEditForm">
                                                        <form method="get" class="form-horizontal">
                                                            <div class="form-group">
                                                                Part Price<input class="col-sm-12 form-control input-sm"
                                                                                 ng-model="item.newPriceForPanel.part_price" placeholder="{$item.part_price$}"/>
                                                            </div>
                                                            <div class="form-group">
                                                                Labour Price<input class="col-sm-12 form-control input-sm"
                                                                                   ng-model="item.newPriceForPanel.labour_price" placeholder="{$ item.labour_price $}"/>
                                                            </div>
                                                            <div class="form-group">
                                                                Material Price<input class="col-sm-12 form-control input-sm"
                                                                                     ng-model="item.newPriceForPanel.material_price" placeholder="{$ item.material_price $}"/>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="text-center">
                                                                    <button class="btn btn-outline btn-link btn-default btn-xs" type="button" ng-click="item.showEditForm=null">Cancel</button>
                                                                    <input class="btn btn-outline btn-link btn-primary btn-xs" type="submit" ng-click="editBookingSummaryCtrl.updatePanelPrice(pack.id,item.id, item.newPriceForPanel, item.extra)" ng-disabled="editBookingSummaryCtrl.ajax_loading" ng-value="editBookingSummaryCtrl.ajax_loading?'Please Wait..':'Save'"/>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </td>
                                                <td class="project-actions">
                                                    <div class="btn-group dropdown" uib-dropdown="">
                                                        <button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false">
                                                            Action <span class="caret"></span>
                                                        </button>
                                                        <ul role="menu" uib-dropdown-menu="" class="dropdown-menu">
                                                            <li>
                                                                <!-- buttons with permission to caller before pickup -->
                                                                <a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','Caller','CityCallCenterManager','DriverManager']"
                                                                   class="btn-sm"
                                                                   ng-if="editBookingCtrl.booking.status.flow_order_num < 4"
                                                                   ng-click="editBookingSummaryCtrl.removePanelFromPackage(item.id)"> Remove Panel </a>
                                                                <!-- buttons with permission to caller before pickup -->
                                                                <a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager']"
                                                                   class="btn-sm"
                                                                   ng-if="editBookingCtrl.booking.status.flow_order_num >= 4"
                                                                   ng-click="editBookingSummaryCtrl.removePanelFromPackage(item.id)"> Remove Panel </a>
                                                            </li>
                                                            <li><a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']" class="btn-sm" ng-click="editBookingSummaryCtrl.addReworkPanel(item)"> Add Rework on this Panel </a></li>
                                                        </ul>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- buttons with permission to caller before pickup -->
                                        <button permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','Caller','CityCallCenterManager','DriverManager']"
                                                ng-if="editBookingCtrl.booking.rework_booking && editBookingCtrl.booking.status.flow_order_num < 4"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-click="editBookingSummaryCtrl.addPanelToPackage(pack.id, editBookingSummaryCtrl.booking.usercar, true)"
                                                class="btn btn-primary btn-xs" style="color:white;">Add Extra Panel</button>

                                        <button permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','Caller','CityCallCenterManager','DriverManager']"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-if="editBookingCtrl.booking.status.flow_order_num < 4"
                                                ng-click="editBookingSummaryCtrl.addPanelToPackage(pack.id, editBookingSummaryCtrl.booking.usercar)"
                                                class="btn btn-primary btn-xs" style="color:white;">{$ editBookingCtrl.booking.rework_booking ? 'Add Rework Panel': 'Add Panel' $}</button>

                                        <!-- buttons without permission to caller before pickup -->
                                        <button permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager']"
                                                ng-if="editBookingCtrl.booking.rework_booking && editBookingCtrl.booking.status.flow_order_num >= 4"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-click="editBookingSummaryCtrl.addPanelToPackage(pack.id, editBookingSummaryCtrl.booking.usercar, true)"
                                                class="btn btn-primary btn-xs" style="color:white;">Add Extra Panel</button>

                                        <button permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager']"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-if="editBookingCtrl.booking.status.flow_order_num >= 4"
                                                ng-click="editBookingSummaryCtrl.addPanelToPackage(pack.id, editBookingSummaryCtrl.booking.usercar)"
                                                class="btn btn-primary btn-xs" style="color:white;">{$ editBookingCtrl.booking.rework_booking ? 'Add Rework Panel': 'Add Panel' $}</button>
                                    </div>
                                </div>
                            </td>
                            <td ng-if="pack.package.package.category != 2">
                                <span ng-show="pack.package.package.category != 2">Qty. 1</span>
                            </td>
                            <td ng-if="pack.package.package.category != 2">
                                <span ng-if="pack.package.package.category != 2">&#8377; {$ pack.price $}</span>
                            </td>
                            <td class="text-right">
                                <div class="btn-group dropdown" uib-dropdown="">
                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle="" aria-haspopup="true" aria-expanded="false">
                                        Action <span class="caret"></span>
                                    </button>
                                    <ul role="menu" uib-dropdown-menu="" class="dropdown-menu">
                                        <li>
                                            <!-- buttons with permission to caller before pickup -->
                                            <a
                                                permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','Caller','CityCallCenterManager','DriverManager']"
                                                class="btn-sm"
                                                ng-if="editBookingCtrl.booking.status.flow_order_num < 4"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-click="editBookingSummaryCtrl.removePackageFromBooking(pack.id)">
                                            Remove Package</a>
                                            <!-- buttons without permission to caller before pickup -->
                                            <a
                                                permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager']"
                                                class="btn-sm"
                                                ng-if="editBookingCtrl.booking.status.flow_order_num >= 4"
                                                ng-disabled="editBookingCtrl.booking.status.flow_order_num>=23"
                                                ng-click="editBookingSummaryCtrl.removePackageFromBooking(pack.id)">
                                            Remove Package</a>
                                        </li>
                                        <li ng-if="pack.package.package.category!=2"><a permission="['OpsAdmin','OpsManager', 'WorkshopManager', 'WorkshopAssistantManager','WorkshopWorkManager','VASIncharge']" class="btn-sm" ng-click="editBookingSummaryCtrl.addReworkPackage(pack)"> Add Rework on this Package </a></li>
                                    </ul>
                                </div>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>